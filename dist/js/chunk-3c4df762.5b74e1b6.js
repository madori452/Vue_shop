(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c4df762"],{"10df":function(t,e,i){"use strict";i.r(e);var a=i("7a23");const s=t=>(Object(a["C"])("data-v-1b1d168a"),t=t(),Object(a["A"])(),t),l={class:"table mt-4"},c=s(()=>Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th",null,"文章標題"),Object(a["h"])("th",null,"文章作者"),Object(a["h"])("th",null,"創建日期"),Object(a["h"])("th",null,"文章分類"),Object(a["h"])("th",null,"是否公開"),Object(a["h"])("th",null,"編輯")])],-1)),o={key:0},n={key:1},r=["onClick"],d=["onClick"];function h(t,e,i,s,h,b){const u=Object(a["I"])("Loading"),m=Object(a["I"])("Pagination"),p=Object(a["I"])("ArticleModal"),g=Object(a["I"])("DelModal");return Object(a["z"])(),Object(a["g"])(a["a"],null,[Object(a["k"])(u,{active:h.isLoading},null,8,["active"]),Object(a["h"])("button",{onClick:e[0]||(e[0]=t=>b.openModal(!0)),class:"btn btn-primary px-5 rounded-0 text-white mt-3",type:"button"},"新增文章"),Object(a["h"])("table",l,[c,(Object(a["z"])(!0),Object(a["g"])(a["a"],null,Object(a["G"])(h.articles,t=>(Object(a["z"])(),Object(a["g"])("tbody",{key:t.title},[Object(a["h"])("tr",null,[Object(a["h"])("td",null,Object(a["L"])(t.title),1),Object(a["h"])("td",null,Object(a["L"])(t.author),1),Object(a["h"])("td",null,Object(a["L"])(t.create_at),1),Object(a["h"])("td",null,Object(a["L"])(t.tag),1),Object(a["h"])("td",null,[!0===t.isPublic?(Object(a["z"])(),Object(a["g"])("li",o,"是")):(Object(a["z"])(),Object(a["g"])("li",n,"否"))]),Object(a["h"])("td",null,[Object(a["h"])("button",{onClick:e=>b.openModal(!1,t),class:"btn btn-outline-primary btn-sm"},"檢視",8,r),Object(a["h"])("button",{onClick:e=>b.opendelModal(t),class:"btn btn-outline-danger btn-sm"},"刪除",8,d)])])]))),128))]),Object(a["k"])(m,{pages:h.pagination,onEmitPages:b.getArticles},null,8,["pages","onEmitPages"]),Object(a["k"])(p,{ref:"articleModal",article:h.tempArticle,onUpdate:b.updateArticle},null,8,["article","onUpdate"]),Object(a["k"])(g,{ref:"delModal",item:h.tempArticle,onDelItem:b.delArticle},null,8,["item","onDelItem"])],64)}var b=i("6ff1"),u=i("1799");const m={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},p={class:"modal-dialog modal-xl",role:"document"},g={class:"modal-content border-0"},j=Object(a["h"])("div",{class:"modal-header bg-dark text-white"},[Object(a["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["h"])("span",null,"文章細節")]),Object(a["h"])("button",{type:"button",class:"btn-close"})],-1),f={class:"modal-body"},O={class:"row"},_={class:"col-sm-4"},v={class:"mb-3"},y=Object(a["h"])("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),A=["src"],w={class:"col-sm-8"},k={class:"mb-3"},x=Object(a["h"])("label",{for:"title",class:"form-label"},"文章標題",-1),P={class:"row gx-2"},L={class:"mb-3 col-md-12"},M=Object(a["h"])("label",{for:"category",class:"form-label"},"文章描述",-1),T={class:"row gx-2"},V={class:"mb-3 col-md-12"},C=Object(a["h"])("label",{for:"category",class:"form-label"},"文章內容",-1),$={class:"row gx-2"},E={class:"mb-3 col-md-6"},U=Object(a["h"])("label",{for:"origin_price",class:"form-label"},"分類",-1),D={class:"mb-3 col-md-6"},I=Object(a["h"])("label",{for:"origin_price",class:"form-label"},"作者",-1),z={class:"row gx-2"},B={class:"mb-3 col-md-6"},N=Object(a["h"])("label",{for:"origin_price",class:"form-label"},"日期",-1),R={class:"mb-3"},S={class:"form-check"},F=Object(a["h"])("label",{class:"form-check-label",for:"isPublic"},"公開",-1),H={class:"modal-footer"},q=Object(a["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function W(t,e,i,s,l,c){return Object(a["z"])(),Object(a["g"])("div",m,[Object(a["h"])("div",p,[Object(a["h"])("div",g,[j,Object(a["h"])("div",f,[Object(a["h"])("div",O,[Object(a["h"])("div",_,[Object(a["h"])("div",v,[y,Object(a["V"])(Object(a["h"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":e[0]||(e[0]=t=>l.tempArticle.image=t),placeholder:"請輸入圖片連結"},null,512),[[a["P"],l.tempArticle.image]]),Object(a["h"])("input",{type:"file",ref:"fileInput",class:"form-control",id:"image",onChange:e[1]||(e[1]=(...t)=>c.uploadFile&&c.uploadFile(...t))},null,544)]),Object(a["h"])("img",{class:"img-fluid",src:l.tempArticle.image,alt:""},null,8,A)]),Object(a["h"])("div",w,[Object(a["h"])("div",k,[x,Object(a["V"])(Object(a["h"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[2]||(e[2]=t=>l.tempArticle.title=t),placeholder:"請輸入標題"},null,512),[[a["P"],l.tempArticle.title]])]),Object(a["h"])("div",P,[Object(a["h"])("div",L,[M,Object(a["V"])(Object(a["h"])("textarea",{type:"text",class:"form-control",id:"category",style:{height:"80px"},"onUpdate:modelValue":e[3]||(e[3]=t=>l.tempArticle.description=t),placeholder:"請輸入文章描述"},"\n                ",512),[[a["P"],l.tempArticle.description]])])]),Object(a["h"])("div",T,[Object(a["h"])("div",V,[C,Object(a["V"])(Object(a["h"])("textarea",{type:"text",class:"form-control",id:"category",style:{height:"80px"},"onUpdate:modelValue":e[4]||(e[4]=t=>l.tempArticle.content=t),placeholder:"請輸入文章描述"},"\n                ",512),[[a["P"],l.tempArticle.content]])])]),Object(a["h"])("div",$,[Object(a["h"])("div",E,[U,Object(a["V"])(Object(a["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=t=>l.tempArticle.tag=t),placeholder:"請輸入分類"},null,512),[[a["P"],l.tempArticle.tag,void 0,{number:!0}]])]),Object(a["h"])("div",D,[I,Object(a["V"])(Object(a["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=t=>l.tempArticle.author=t),placeholder:"請輸入作者"},null,512),[[a["P"],l.tempArticle.author,void 0,{number:!0}]])])]),Object(a["h"])("div",z,[Object(a["h"])("div",B,[N,Object(a["V"])(Object(a["h"])("input",{type:"date",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=e=>t.create_At=e)},null,512),[[a["P"],t.create_At]])])]),Object(a["h"])("div",R,[Object(a["h"])("div",S,[Object(a["V"])(Object(a["h"])("input",{type:"checkbox",id:"isPublic",class:"form-check-input","onUpdate:modelValue":e[8]||(e[8]=t=>l.tempArticle.isPublic=t)},null,512),[[a["O"],l.tempArticle.isPublic]]),F])])])])]),Object(a["h"])("div",H,[q,Object(a["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=e=>t.$emit("update",l.tempArticle))}," 確認 ")])])])],512)}var J=i("e0ae"),Y={props:{article:{type:Object,default(){return{}}}},data(){return{tempArticle:{}}},emits:["update"],mixins:[J["a"]],inject:["emitter"],watch:{article(){this.tempArticle=this.article}},methods:{uploadFile(){const t=this.$refs.fileInput.files[0],e=new FormData;e.append("file-to-upload",t),this.$http.post(Object({VUE_APP_CLI_UI_URL:"",NODE_ENV:"production",VUE_APP_API:"https://vue3-course-api.hexschool.io/",VUE_APP_PATH:"tracytung-vue-api",BASE_URL:"/Vue_shop/dist/"}).VUE_APP_URL+"api/tracytung-vue-api/admin/upload",e).then(t=>{t.data.success&&(this.innertempArticle.imageUrl=t.data.imageUrl)}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})}}},G=i("6b0d"),Q=i.n(G);const K=Q()(Y,[["render",W]]);var X=K,Z={data(){return{articles:[],tempArticle:{},isLoading:!1,isNew:!1,pagination:{}}},components:{DelModal:b["a"],Pagination:u["a"],ArticleModal:X},inject:["emitter"],methods:{getArticles(t=1){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/articles/?page="+t;this.isLoading=!0,this.$http.get(e,this.articles).then(t=>{this.isLoading=!1,this.articles=t.data.articles,this.pagination=t.data.pagination}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},delArticle(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/article/"+this.tempArticle.id;this.$http.delete(t).then(t=>{const e=this.$refs.delModal;e.hideModal(),this.getArticles()}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},opendelModal(t){this.tempArticle={...t};const e=this.$refs.delModal;e.showModal()},getArticle(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/article/"+t.id;this.isLoading=!0,this.$http.get(e).then(e=>{e.data.success&&(this.openModal(!1,t),this.isLoading=!1)}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},openModal(t,e){t?this.tempArticle={}:(this.isNew=!1,this.tempArticle={...e}),this.isNew=t;const i=this.$refs.articleModal;i.showModal()},updateArticle(t){this.tempArticle=t;let e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/article",i="post";this.isNew||(e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/article/"+t.id,i="put");const a=this.$refs.articleModal;this.$http[i](e,{data:this.tempArticle}).then(t=>{a.hideModal(),t.data.success?(this.getArticles(),this.emitter.emit("push-message",{style:"success",title:"更新成功"})):this.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:t.data.message.join("、")})}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})}},created(){this.getArticles()}};i("aad2");const tt=Q()(Z,[["render",h],["__scopeId","data-v-1b1d168a"]]);e["default"]=tt},1799:function(t,e,i){"use strict";var a=i("7a23");const s={"aria-label":"Page navigation example"},l={class:"pagination justify-content-center"},c=Object(a["h"])("a",{class:"page-link",href:"#","aria-label":"Previous"},[Object(a["h"])("span",{"aria-hidden":"true"},"«")],-1),o=[c],n=["onClick"],r=Object(a["h"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(a["h"])("span",{"aria-hidden":"true"},"»")],-1),d=[r];function h(t,e,i,c,r,h){return Object(a["z"])(),Object(a["g"])("nav",s,[Object(a["h"])("ul",l,[Object(a["h"])("li",{class:"page-item",onClick:e[0]||(e[0]=Object(a["W"])(t=>h.updatePage(i.pages.current_page-1),["prevent"]))},o),(Object(a["z"])(!0),Object(a["g"])(a["a"],null,Object(a["G"])(i.pages.total_pages,t=>(Object(a["z"])(),Object(a["g"])("li",{class:Object(a["s"])(["page-item",{active:t===i.pages.current_page}]),key:t},[Object(a["h"])("a",{class:"page-link",href:"#",onClick:Object(a["W"])(e=>h.updatePage(t),["prevent"])},Object(a["L"])(t),9,n)],2))),128)),Object(a["h"])("li",{class:"page-item",onClick:e[1]||(e[1]=Object(a["W"])(t=>h.updatePage(i.pages.current_page+1),["prevent"]))},d)])])}var b={props:["pages","productClass"],emits:["emit-pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},u=i("6b0d"),m=i.n(u);const p=m()(b,[["render",h]]);e["a"]=p},"6ff1":function(t,e,i){"use strict";var a=i("7a23");const s={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},l={class:"modal-dialog",role:"document"},c={class:"modal-content border-0"},o={class:"modal-header bg-danger text-white"},n={class:"modal-title"},r=Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),d={class:"modal-body"},h=Object(a["j"])(" 是否刪除 "),b={class:"text-danger"},u=Object(a["j"])(" (刪除後將無法恢復)。 "),m={class:"modal-footer"},p=Object(a["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function g(t,e,i,g,j,f){return Object(a["z"])(),Object(a["g"])("div",s,[Object(a["h"])("div",l,[Object(a["h"])("div",c,[Object(a["h"])("div",o,[Object(a["h"])("h5",n,[Object(a["h"])("span",null,"刪除 "+Object(a["L"])(i.item.title),1)]),r]),Object(a["h"])("div",d,[h,Object(a["h"])("strong",b,Object(a["L"])(i.item.title),1),u]),Object(a["h"])("div",m,[p,Object(a["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=e=>t.$emit("del-item"))},"確認刪除 ")])])])],512)}var j=i("e0ae"),f={props:{item:{}},data(){return{modal:""}},mixins:[j["a"]]},O=i("6b0d"),_=i.n(O);const v=_()(f,[["render",g]]);e["a"]=v},"7c2b":function(t,e,i){
/*!
  * Bootstrap modal.js v5.2.0 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,a){t.exports=a(i("aa53"),i("6a95"),i("848f"),i("ba05"),i("302d"),i("1494"),i("5470"),i("0f28"))})(0,(function(t,e,i,a,s,l,c,o){"use strict";const n=t=>t&&"object"===typeof t&&"default"in t?t:{default:t},r=n(e),d=n(i),h=n(a),b=n(s),u=n(l),m=n(c),p="modal",g="bs.modal",j="."+g,f=".data-api",O="Escape",_="hide"+j,v="hidePrevented"+j,y="hidden"+j,A="show"+j,w="shown"+j,k="resize"+j,x="mousedown.dismiss"+j,P="keydown.dismiss"+j,L=`click${j}${f}`,M="modal-open",T="fade",V="show",C="modal-static",$=".modal.show",E=".modal-dialog",U=".modal-body",D='[data-bs-toggle="modal"]',I={backdrop:!0,focus:!0,keyboard:!0},z={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class B extends b.default{constructor(t,e){super(t,e),this._dialog=d.default.findOne(E,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new h.default,this._addEventListeners()}static get Default(){return I}static get DefaultType(){return z}static get NAME(){return p}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=r.default.trigger(this._element,A,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(M),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){if(!this._isShown||this._isTransitioning)return;const t=r.default.trigger(this._element,_);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(V),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])r.default.off(t,j);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new u.default({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new m.default({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=d.default.findOne(U,this._dialog);i&&(i.scrollTop=0),t.reflow(this._element),this._element.classList.add(V);const a=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,r.default.trigger(this._element,w,{relatedTarget:e})};this._queueCallback(a,this._dialog,this._isAnimated())}_addEventListeners(){r.default.on(this._element,P,t=>{if(t.key===O)return this._config.keyboard?(t.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),r.default.on(window,k,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),r.default.on(this._element,x,t=>{t.target===t.currentTarget&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(M),this._resetAdjustments(),this._scrollBar.reset(),r.default.trigger(this._element,y)})}_isAnimated(){return this._element.classList.contains(T)}_triggerBackdropTransition(){const t=r.default.trigger(this._element,v);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(C)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(C),this._queueCallback(()=>{this._element.classList.remove(C),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),a=i>0;if(a&&!e){const e=t.isRTL()?"paddingLeft":"paddingRight";this._element.style[e]=i+"px"}if(!a&&e){const e=t.isRTL()?"paddingRight":"paddingLeft";this._element.style[e]=i+"px"}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=B.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}return r.default.on(document,L,D,(function(e){const i=t.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),r.default.one(i,A,e=>{e.defaultPrevented||r.default.one(i,y,()=>{t.isVisible(this)&&this.focus()})});const a=d.default.findOne($);a&&B.getInstance(a).hide();const s=B.getOrCreateInstance(i);s.toggle(this)})),o.enableDismissTrigger(B),t.defineJQueryPlugin(B),B}))},aad2:function(t,e,i){"use strict";i("ebe1")},e0ae:function(t,e,i){"use strict";var a=i("7c2b"),s=i.n(a);e["a"]={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new s.a(this.$refs.modal)}}},ebe1:function(t,e,i){}}]);
//# sourceMappingURL=chunk-3c4df762.5b74e1b6.js.map