(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bebd6452"],{1799:function(t,e,i){"use strict";var s=i("7a23");const a={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},l=Object(s["h"])("a",{class:"page-link",href:"#","aria-label":"Previous"},[Object(s["h"])("span",{"aria-hidden":"true"},"«")],-1),d=[l],o=["onClick"],r=Object(s["h"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(s["h"])("span",{"aria-hidden":"true"},"»")],-1),c=[r];function h(t,e,i,l,r,h){return Object(s["z"])(),Object(s["g"])("nav",a,[Object(s["h"])("ul",n,[Object(s["h"])("li",{class:"page-item",onClick:e[0]||(e[0]=Object(s["W"])(t=>h.updatePage(i.pages.current_page-1),["prevent"]))},d),(Object(s["z"])(!0),Object(s["g"])(s["a"],null,Object(s["G"])(i.pages.total_pages,t=>(Object(s["z"])(),Object(s["g"])("li",{class:Object(s["s"])(["page-item",{active:t===i.pages.current_page}]),key:t},[Object(s["h"])("a",{class:"page-link",href:"#",onClick:Object(s["W"])(e=>h.updatePage(t),["prevent"])},Object(s["L"])(t),9,o)],2))),128)),Object(s["h"])("li",{class:"page-item",onClick:e[1]||(e[1]=Object(s["W"])(t=>h.updatePage(i.pages.current_page+1),["prevent"]))},c)])])}var b={props:["pages","productClass"],emits:["emit-pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},u=i("6b0d"),m=i.n(u);const O=m()(b,[["render",h]]);e["a"]=O},"6ff1":function(t,e,i){"use strict";var s=i("7a23");const a={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},n={class:"modal-dialog",role:"document"},l={class:"modal-content border-0"},d={class:"modal-header bg-danger text-white"},o={class:"modal-title"},r=Object(s["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),c={class:"modal-body"},h=Object(s["j"])(" 是否刪除 "),b={class:"text-danger"},u=Object(s["j"])(" (刪除後將無法恢復)。 "),m={class:"modal-footer"},O=Object(s["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function p(t,e,i,p,g,j){return Object(s["z"])(),Object(s["g"])("div",a,[Object(s["h"])("div",n,[Object(s["h"])("div",l,[Object(s["h"])("div",d,[Object(s["h"])("h5",o,[Object(s["h"])("span",null,"刪除 "+Object(s["L"])(i.item.title),1)]),r]),Object(s["h"])("div",c,[h,Object(s["h"])("strong",b,Object(s["L"])(i.item.title),1),u]),Object(s["h"])("div",m,[O,Object(s["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=e=>t.$emit("del-item"))},"確認刪除 ")])])])],512)}var g=i("e0ae"),j={props:{item:{}},data(){return{modal:""}},mixins:[g["a"]]},f=i("6b0d"),_=i.n(f);const v=_()(j,[["render",p]]);e["a"]=v},7629:function(t,e,i){"use strict";i.r(e);var s=i("7a23");const a=t=>(Object(s["C"])("data-v-3e0d8a8a"),t=t(),Object(s["A"])(),t),n={class:"table pt-5"},l=a(()=>Object(s["h"])("thead",null,[Object(s["h"])("tr",null,[Object(s["h"])("th",null,"購買時間"),Object(s["h"])("th",null,"Email"),Object(s["h"])("th",null,"購買款項"),Object(s["h"])("th",null,"應付金額"),Object(s["h"])("th",null,"是否付款"),Object(s["h"])("th",null,"編輯")])],-1)),d={key:0},o={key:1},r=["onClick"],c=["onClick"];function h(t,e,i,a,h,b){const u=Object(s["I"])("Loading"),m=Object(s["I"])("Pagination"),O=Object(s["I"])("OrdertModal"),p=Object(s["I"])("DelModal");return Object(s["z"])(),Object(s["g"])(s["a"],null,[Object(s["k"])(u,{active:h.isLoading},null,8,["active"]),Object(s["h"])("table",n,[l,(Object(s["z"])(!0),Object(s["g"])(s["a"],null,Object(s["G"])(h.orders,e=>(Object(s["z"])(),Object(s["g"])("tbody",{key:e.id},[Object(s["h"])("tr",null,[Object(s["h"])("td",null,Object(s["L"])(t.$filters.date(e.create_at)),1),Object(s["h"])("td",null,Object(s["L"])(e.user.email),1),Object(s["h"])("td",null,[(Object(s["z"])(!0),Object(s["g"])(s["a"],null,Object(s["G"])(e.products,(t,e)=>(Object(s["z"])(),Object(s["g"])("li",{key:e},Object(s["L"])(t.product.title)+"   數量: "+Object(s["L"])(t.qty)+"   單位: "+Object(s["L"])(t.product.unit),1))),128))]),Object(s["h"])("td",null,Object(s["L"])(Math.round(e.total)),1),Object(s["h"])("td",null,[!0===e.is_paid?(Object(s["z"])(),Object(s["g"])("li",d,"是")):(Object(s["z"])(),Object(s["g"])("li",o,"否"))]),Object(s["h"])("td",null,[Object(s["h"])("button",{onClick:t=>b.openModal(!1,e),class:"btn btn-outline-primary btn-sm"},"檢視",8,r),Object(s["h"])("button",{onClick:t=>b.openDelOrderModal(e),class:"btn btn-outline-danger btn-sm"},"刪除",8,c)])])]))),128))]),Object(s["k"])(m,{pages:h.pagination,onEmitPages:b.getOrders},null,8,["pages","onEmitPages"]),Object(s["k"])(O,{ref:"orderModal",order:h.tempOrder,onUpdate:b.updatePaid},null,8,["order","onUpdate"]),Object(s["k"])(p,{item:h.tempOrder,ref:"delModal",onDelItem:b.delOrder},null,8,["item","onDelItem"])],64)}var b=i("6ff1"),u=i("1799");const m={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},O={class:"modal-dialog modal-xl",role:"document"},p={class:"modal-content border-0"},g=Object(s["h"])("div",{class:"modal-header bg-dark text-white"},[Object(s["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(s["h"])("span",null,"訂單細節")]),Object(s["h"])("button",{type:"button",class:"btn-close"})],-1),j={class:"modal-body"},f={class:"row"},_={key:0,class:"mb-3 col-md-6"},v=Object(s["h"])("h5",null,"用戶資料",-1),y=Object(s["h"])("th",{for:"title"},"姓名",-1),k=Object(s["h"])("th",{for:"title"},"Email",-1),w=Object(s["h"])("th",{for:"title"},"電話",-1),L=Object(s["h"])("th",{for:"title"},"地址",-1),M={class:"col-md-6"},x=Object(s["h"])("h5",null,"訂單細節",-1),T=Object(s["h"])("th",{style:{width:"100px"}},"訂單編號",-1),$=Object(s["h"])("th",null,"下單時間",-1),z=Object(s["h"])("th",null,"付款時間",-1),C={key:0},A={key:1},P=Object(s["h"])("th",null,"付款狀態",-1),D={key:0,class:"text-success"},E={key:1,class:"text-muted"},I=Object(s["h"])("th",null,"總金額",-1),B={class:"modal-footer"},S=Object(s["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function N(t,e,i,a,n,l){return Object(s["z"])(),Object(s["g"])("div",m,[Object(s["h"])("div",O,[Object(s["h"])("div",p,[g,Object(s["h"])("div",j,[Object(s["h"])("div",f,[n.tempOrder.user?(Object(s["z"])(),Object(s["g"])("div",_,[v,Object(s["h"])("tr",null,[y,Object(s["h"])("td",null,Object(s["L"])(n.tempOrder.user.name),1)]),Object(s["h"])("tr",null,[k,Object(s["h"])("td",null,Object(s["L"])(n.tempOrder.user.email),1)]),Object(s["h"])("tr",null,[w,Object(s["h"])("td",null,Object(s["L"])(n.tempOrder.user.tel),1)]),Object(s["h"])("tr",null,[L,Object(s["h"])("td",null,Object(s["L"])(n.tempOrder.user.address),1)])])):Object(s["f"])("",!0),Object(s["h"])("div",M,[x,Object(s["h"])("tr",null,[T,Object(s["h"])("td",null,Object(s["L"])(n.tempOrder.id),1)]),Object(s["h"])("tr",null,[$,Object(s["h"])("td",null,Object(s["L"])(t.$filters.date(n.tempOrder.create_at)),1)]),Object(s["h"])("tr",null,[z,Object(s["h"])("td",null,[n.tempOrder.paid_date?(Object(s["z"])(),Object(s["g"])("span",C,Object(s["L"])(t.$filters.date(n.tempOrder.paid_date)),1)):(Object(s["z"])(),Object(s["g"])("span",A,"時間不正確"))])]),Object(s["h"])("tr",null,[P,Object(s["h"])("td",null,[n.tempOrder.is_paid?(Object(s["z"])(),Object(s["g"])("strong",D,"已付款")):(Object(s["z"])(),Object(s["g"])("span",E,"尚未付款"))])]),Object(s["h"])("tr",null,[I,Object(s["h"])("td",null,Object(s["L"])(t.$filters.currency(n.tempOrder.total)),1)])])])]),Object(s["h"])("div",B,[S,Object(s["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=t=>l.update(n.tempOrder))}," 修改訂單狀態 ")])])])],512)}var R=i("e0ae"),q={props:{order:{type:Object,default(){return{}}}},data(){return{tempOrder:{}}},emits:["update"],mixins:[R["a"]],inject:["emitter"],watch:{order(){this.tempOrder=this.order}},methods:{update(t){this.$emit("update",t)}}},H=i("6b0d"),W=i.n(H);const F=W()(q,[["render",N]]);var G=F,J={data(){return{orders:[],tempOrder:{},isLoading:!1,isNew:!1,pagination:{}}},components:{DelModal:b["a"],Pagination:u["a"],OrdertModal:G},inject:["emitter"],methods:{getOrders(t=1){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/orders/?page="+t;this.isLoading=!0,this.$http.get(e,this.orders).then(t=>{this.isLoading=!1,this.orders=t.data.orders,this.pagination=t.data.pagination}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},openDelOrderModal(t){this.tempOrder={...t};const e=this.$refs.delModal;e.showModal()},delOrder(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/order/"+this.tempOrder.id;this.isLoading=!0,this.$http.delete(t).then(t=>{this.$httpMessageState(t,"刪除訂單");const e=this.$refs.delModal;e.hideModal(),this.getOrders()}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},openModal(t,e){this.isNew=!0,this.tempOrder={...e};const i=this.$refs.orderModal;i.showModal()},updatePaid(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/admin/order/"+t.id;this.isLoading=!0,this.$http.put(e,{data:t}).then(t=>{this.$httpMessageState(t,"更改訂單付款狀態");const e=this.$refs.orderModal;e.hideModal(),this.getOrders()}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})}},created(){this.getOrders()}};i("bc19");const U=W()(J,[["render",h],["__scopeId","data-v-3e0d8a8a"]]);e["default"]=U},"7c2b":function(t,e,i){
/*!
  * Bootstrap modal.js v5.2.0 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,s){t.exports=s(i("aa53"),i("6a95"),i("848f"),i("ba05"),i("302d"),i("1494"),i("5470"),i("0f28"))})(0,(function(t,e,i,s,a,n,l,d){"use strict";const o=t=>t&&"object"===typeof t&&"default"in t?t:{default:t},r=o(e),c=o(i),h=o(s),b=o(a),u=o(n),m=o(l),O="modal",p="bs.modal",g="."+p,j=".data-api",f="Escape",_="hide"+g,v="hidePrevented"+g,y="hidden"+g,k="show"+g,w="shown"+g,L="resize"+g,M="mousedown.dismiss"+g,x="keydown.dismiss"+g,T=`click${g}${j}`,$="modal-open",z="fade",C="show",A="modal-static",P=".modal.show",D=".modal-dialog",E=".modal-body",I='[data-bs-toggle="modal"]',B={backdrop:!0,focus:!0,keyboard:!0},S={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class N extends b.default{constructor(t,e){super(t,e),this._dialog=c.default.findOne(D,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new h.default,this._addEventListeners()}static get Default(){return B}static get DefaultType(){return S}static get NAME(){return O}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=r.default.trigger(this._element,k,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add($),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){if(!this._isShown||this._isTransitioning)return;const t=r.default.trigger(this._element,_);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(C),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])r.default.off(t,g);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new u.default({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new m.default({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=c.default.findOne(E,this._dialog);i&&(i.scrollTop=0),t.reflow(this._element),this._element.classList.add(C);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,r.default.trigger(this._element,w,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){r.default.on(this._element,x,t=>{if(t.key===f)return this._config.keyboard?(t.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),r.default.on(window,L,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),r.default.on(this._element,M,t=>{t.target===t.currentTarget&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove($),this._resetAdjustments(),this._scrollBar.reset(),r.default.trigger(this._element,y)})}_isAnimated(){return this._element.classList.contains(z)}_triggerBackdropTransition(){const t=r.default.trigger(this._element,v);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(A)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(A),this._queueCallback(()=>{this._element.classList.remove(A),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),s=i>0;if(s&&!e){const e=t.isRTL()?"paddingLeft":"paddingRight";this._element.style[e]=i+"px"}if(!s&&e){const e=t.isRTL()?"paddingRight":"paddingLeft";this._element.style[e]=i+"px"}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=N.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}return r.default.on(document,T,I,(function(e){const i=t.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),r.default.one(i,k,e=>{e.defaultPrevented||r.default.one(i,y,()=>{t.isVisible(this)&&this.focus()})});const s=c.default.findOne(P);s&&N.getInstance(s).hide();const a=N.getOrCreateInstance(i);a.toggle(this)})),d.enableDismissTrigger(N),t.defineJQueryPlugin(N),N}))},"925c":function(t,e,i){},bc19:function(t,e,i){"use strict";i("925c")},e0ae:function(t,e,i){"use strict";var s=i("7c2b"),a=i.n(s);e["a"]={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new a.a(this.$refs.modal)}}}}]);
//# sourceMappingURL=chunk-bebd6452.49d1ff03.js.map