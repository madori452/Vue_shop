(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a634b13c"],{"1c84":function(t,e,c){},3774:function(t,e,c){"use strict";c("1c84")},5727:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),s=c("9d61"),l=c.n(s),o=c("b600"),i=c.n(o),n=c("fe29"),r=c.n(n);const d=t=>(Object(a["C"])("data-v-1f2b3b93"),t=t(),Object(a["A"])(),t),b=Object(a["i"])('<div class="container-fluid d-flex align-items-center justify-content-center px-0" data-v-1f2b3b93><h4 class="en-font" data-v-1f2b3b93>CART</h4><img src="'+l.a+'" class="d-lg-block d-none w-100" alt="banner" data-v-1f2b3b93><img src="'+i.a+'" class="d-md-block d-none d-lg-none w-100" alt="Carousel01" data-v-1f2b3b93><img src="'+r.a+'" class="d-sm-block d-md-none w-100" alt="Carousel01" data-v-1f2b3b93></div>',1),u={class:"container"},h={class:"row my-5"},m={class:"step-line mb-4"},p={class:"col-12 d-flex ps-0 justify-content-center align-items-center en-font mx-auto"},j={class:"circle circle01 col-3"},O=d(()=>Object(a["h"])("p",{class:"step"},"確認訂單資訊",-1)),f=Object(a["i"])('<li class="circle circle01 col-3 offset-1" data-v-1f2b3b93><p class="num d-block mx-auto" data-v-1f2b3b93>2</p><p class="step" data-v-1f2b3b93>建立個人訂單</p></li><li class="circle circle01 col-3 offset-1" data-v-1f2b3b93><p class="num d-block mx-auto" data-v-1f2b3b93>3</p><p class="step" data-v-1f2b3b93>付款完成</p></li>',2),g={key:0,class:"row mx-auto"},v={key:0,class:"col-lg-6 mx-auto text-center my-5 cart-none bg-white"},y={class:"go-shop mx-auto d-flex justify-content-center align-items-center flex-column"},x=d(()=>Object(a["h"])("h5",{class:"text-primary en-font"},"目前還沒有商品！快去選購吧",-1)),k=d(()=>Object(a["h"])("button",{type:"button",class:"shop btn btn-primary py-2 px-5 text-white rounded-0"},"選擇商品",-1)),C={key:1,class:"col-xl-5 cart-list-menu bg-white offset-xl-1"},w={class:"px-1"},_=d(()=>Object(a["h"])("p",{class:"h5 en-font mt-5"},"購物清單",-1)),I=d(()=>Object(a["h"])("hr",null,null,-1)),V={class:"table align-middle px-4"},$=d(()=>Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th",{class:"remove-item"}),Object(a["h"])("th",{class:"title-item"},"品名"),Object(a["h"])("th",{class:"qty-item"},"數量"),Object(a["h"])("th",{class:"price-item text-end"},"單價")])],-1)),L={class:"px-0"},q=["disabled","onClick"],z=d(()=>Object(a["h"])("i",{class:"bi bi-x"},null,-1)),U=[z],N={class:"product_title"},S={key:0,class:"text-success"},E={class:"input-group input-group-sm"},M=["disabled","onClick"],A=["disabled"],F=["onClick"],J={class:"text-end"},P={key:0,class:"text-success"},G={class:"product_price"},R=d(()=>Object(a["h"])("td",{colspan:"3",class:"text-end"},"總計",-1)),T={class:"text-end price-total"},B={key:0},D=d(()=>Object(a["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),H={class:"text-end text-success"},K={class:"row w-100 m-0 coupon-code"},Q={class:"col-12 d-flex justify-content-end"},W={key:2,class:"form-table-info col-xl-5 px-0"},X={class:"bg-white"},Y={class:"row"},Z=d(()=>Object(a["h"])("p",{class:"h5 en-font mt-5"},"訂購人資料",-1)),tt=d(()=>Object(a["h"])("hr",null,null,-1)),et={class:"mb-3 mt-3"},ct=d(()=>Object(a["h"])("label",{for:"email",class:"form-label"},"Email",-1)),at={class:"mb-3"},st=d(()=>Object(a["h"])("label",{for:"name",class:"form-label"},"姓名",-1)),lt={class:"mb-3"},ot=d(()=>Object(a["h"])("label",{for:"tel",class:"form-label"},"電話",-1)),it={class:"mb-3"},nt=d(()=>Object(a["h"])("label",{for:"address",class:"form-label"},"地址",-1)),rt={class:"mb-3"},dt=d(()=>Object(a["h"])("label",{for:"message",class:"form-label"},"留言",-1)),bt=d(()=>Object(a["h"])("div",{class:"text-end"},[Object(a["h"])("input",{type:"submit",class:"btn btn-primary w-100 mb-5 py-2 text-white rounded-0",value:"送出訂單"})],-1));function ut(t,e,c,s,l,o){const i=Object(a["I"])("CustomLoading"),n=Object(a["I"])("router-link"),r=Object(a["I"])("Field"),d=Object(a["I"])("ErrorMessage"),z=Object(a["I"])("Form");return Object(a["z"])(),Object(a["g"])(a["a"],null,[Object(a["k"])(i,{active:l.isLoading},null,8,["active"]),b,Object(a["h"])("div",u,[Object(a["h"])("div",h,[Object(a["h"])("div",m,[Object(a["h"])("ul",p,[Object(a["h"])("li",j,[Object(a["h"])("p",{class:Object(a["s"])(["num d-block mx-auto",{primary:!0}])},"1"),O]),f])]),l.cart.carts?(Object(a["z"])(),Object(a["g"])("div",g,[0===l.cart.carts.length?(Object(a["z"])(),Object(a["g"])("div",v,[Object(a["h"])("div",y,[x,Object(a["k"])(n,{to:"../user/products"},{default:Object(a["U"])(()=>[k]),_:1})])])):Object(a["f"])("",!0),l.cart.carts.length>=1?(Object(a["z"])(),Object(a["g"])("div",C,[Object(a["h"])("div",w,[_,I,Object(a["h"])("table",V,[$,Object(a["h"])("tbody",null,[l.cart.carts?(Object(a["z"])(!0),Object(a["g"])(a["a"],{key:0},Object(a["G"])(l.cart.carts,e=>(Object(a["z"])(),Object(a["g"])("tr",{key:e.id},[Object(a["h"])("td",L,[Object(a["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm btn-cancel",disabled:l.status.loadingItem===e.id,onClick:t=>o.removeCartItem(e.id)},U,8,q)]),Object(a["h"])("td",null,[Object(a["h"])("span",N,Object(a["L"])(e.product.title),1),e.coupon?(Object(a["z"])(),Object(a["g"])("div",S," 已套用優惠券 ")):Object(a["f"])("",!0)]),Object(a["h"])("td",null,[Object(a["h"])("div",E,[Object(a["h"])("button",{type:"button",disabled:1===e.qty,onClick:t=>o.reduceNum(e),class:"btn btn-primary btn-sm rounded-0"}," - ",8,M),Object(a["h"])("span",{disabled:e.id===l.status.loadingItem,class:"qty_input border border-2 text-center"},Object(a["L"])(e.qty),9,A),Object(a["h"])("button",{type:"button",onClick:t=>o.addNum(e),class:"btn btn-primary btn-sm rounded-0"}," + ",8,F)])]),Object(a["h"])("td",J,[l.cart.final_total!==l.cart.total?(Object(a["z"])(),Object(a["g"])("small",P,"折扣價：")):Object(a["f"])("",!0),Object(a["h"])("span",G,Object(a["L"])(t.$filters.currency(e.final_total)),1)])]))),128)):Object(a["f"])("",!0)]),Object(a["h"])("tfoot",null,[Object(a["h"])("tr",null,[R,Object(a["h"])("td",T,Object(a["L"])(t.$filters.currency(l.cart.total)),1)]),l.cart.final_total!==l.cart.total?(Object(a["z"])(),Object(a["g"])("tr",B,[D,Object(a["h"])("td",H,Object(a["L"])(t.$filters.currency(l.cart.final_total)),1)])):Object(a["f"])("",!0)])]),Object(a["h"])("div",K,[Object(a["h"])("div",Q,[Object(a["V"])(Object(a["h"])("input",{type:"text",class:"form-control d-inline-block","onUpdate:modelValue":e[0]||(e[0]=t=>l.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[a["P"],l.coupon_code]]),Object(a["h"])("button",{class:"btn btn-outline-secondary coupon d-inline-block ms-2 col-4",type:"button",onClick:e[1]||(e[1]=(...t)=>o.addCouponCode&&o.addCouponCode(...t))}," 套用優惠碼 ")])])])])):Object(a["f"])("",!0),l.cart.carts.length>=1?(Object(a["z"])(),Object(a["g"])("div",W,[Object(a["h"])("div",X,[Object(a["h"])("div",Y,[Object(a["k"])(z,{class:"col-md-12 d-flex justify-content-center flex-column form-order",onSubmit:o.createOrder},{default:Object(a["U"])(({errors:t})=>[Z,tt,Object(a["h"])("div",et,[ct,Object(a["k"])(r,{id:"email",name:"email",type:"email",class:Object(a["s"])(["form-control",{"is-invalid":t["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":e[2]||(e[2]=t=>l.form.user.email=t)},null,8,["class","modelValue"]),Object(a["k"])(d,{name:"email",class:"invalid-feedback"})]),Object(a["h"])("div",at,[st,Object(a["k"])(r,{id:"name",name:"姓名",type:"text",class:Object(a["s"])(["form-control",{"is-invalid":t["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":e[3]||(e[3]=t=>l.form.user.name=t)},null,8,["class","modelValue"]),Object(a["k"])(d,{name:"姓名",class:"invalid-feedback"})]),Object(a["h"])("div",lt,[ot,Object(a["k"])(r,{id:"tel",name:"電話",type:"tel",class:Object(a["s"])(["form-control",{"is-invalid":t["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:l.form.user.tel,"onUpdate:modelValue":e[4]||(e[4]=t=>l.form.user.tel=t)},null,8,["class","modelValue"]),Object(a["k"])(d,{name:"電話",class:"invalid-feedback"})]),Object(a["h"])("div",it,[nt,Object(a["k"])(r,{id:"address",name:"地址",type:"text",class:Object(a["s"])(["form-control",{"is-invalid":t["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":e[5]||(e[5]=t=>l.form.user.address=t)},null,8,["class","modelValue"]),Object(a["k"])(d,{name:"地址",class:"invalid-feedback"})]),Object(a["h"])("div",rt,[dt,Object(a["V"])(Object(a["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"2","onUpdate:modelValue":e[6]||(e[6]=t=>l.form.message=t)},null,512),[[a["P"],l.form.message]])]),bt]),_:1},8,["onSubmit"])])])])):Object(a["f"])("",!0)])):Object(a["f"])("",!0)])])],64)}var ht={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},status:{loadingItem:""},isLoading:!1,cart:{},coupon_code:""}},inject:["emitter"],methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart";this.isLoading=!0,this.$http.get(t).then(t=>{this.cart=t.data.data,this.isLoading=!1})},updateCart(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart/"+t.id;this.isLoading=!0,this.status.loadingItem=t.id;const c={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:c}).then(t=>{this.isLoading=!1,this.getCart(),this.status.loadingItem=""}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/coupon",e={code:this.coupon_code};this.$http.post(t,{data:e}).then(t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart()}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},removeCartItem(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart/"+t;this.isLoading=!0,this.status.loadingItem=t,this.$http.delete(e).then(t=>{this.status.loadingItem="",this.emitter.emit("update-qty"),this.$httpMessageState(t,"刪除購物車品項"),this.getCart(),this.isLoading=!1}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},createOrder(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/order",e=this.form;this.$http.post(t,{data:e}).then(t=>{this.orderId=t.data.orderId,this.$router.push("/checkout/"+this.orderId)}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},addNum(t){t.product_id===t.product.id&&(t.qty+=1,this.updateCart(t))},reduceNum(t){t.product_id===t.product.id&&(t.qty-=1,this.updateCart(t))}},created(){this.getCart()}},mt=(c("3774"),c("6b0d")),pt=c.n(mt);const jt=pt()(ht,[["render",ut],["__scopeId","data-v-1f2b3b93"]]);e["default"]=jt},"9d61":function(t,e,c){t.exports=c.p+"img/banner-cart.3775134b.png"},b600:function(t,e,c){t.exports=c.p+"img/cart-pd.3635a89c.png"},fe29:function(t,e,c){t.exports=c.p+"img/cart-mb.1e24b860.png"}}]);
//# sourceMappingURL=chunk-a634b13c.e2594508.js.map