(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a49f8d4"],{"0119":function(t,e,a){t.exports=a.p+"img/cart-mb.1e24b860.png"},5727:function(t,e,a){"use strict";a.r(e);var c=a("7a23"),s=a("c215"),l=a.n(s),o=a("da2c"),n=a.n(o),i=a("0119"),r=a.n(i);const d=t=>(Object(c["C"])("data-v-bba6a390"),t=t(),Object(c["A"])(),t),b=Object(c["i"])('<div class="container-fluid d-flex align-items-center justify-content-center px-0" data-v-bba6a390><h4 class="en-font" data-v-bba6a390>CART</h4><img src="'+l.a+'" class="d-lg-block d-none w-100" alt="banner" data-v-bba6a390><img src="'+n.a+'" class="d-md-block d-none d-lg-none w-100" alt="Carousel01" data-v-bba6a390><img src="'+r.a+'" class="d-sm-block d-md-none w-100" alt="Carousel01" data-v-bba6a390></div>',1),u={class:"container"},h={class:"row my-5"},m={class:"step-line mb-4"},p={class:"col-12 d-flex ps-0 justify-content-center align-items-center en-font mx-auto"},j={class:"circle circle01 col-3"},O=d(()=>Object(c["h"])("p",{class:"step"},"確認訂單資訊",-1)),f=Object(c["i"])('<li class="circle circle01 col-3 offset-1" data-v-bba6a390><p class="num d-block mx-auto" data-v-bba6a390>2</p><p class="step" data-v-bba6a390>建立個人訂單</p></li><li class="circle circle01 col-3 offset-1" data-v-bba6a390><p class="num d-block mx-auto" data-v-bba6a390>3</p><p class="step" data-v-bba6a390>付款完成</p></li>',2),g={key:0,class:"row mx-auto"},v={key:0,class:"col-lg-6 mx-auto text-center my-5 cart-none bg-white"},x={class:"go-shop mx-auto d-flex justify-content-center align-items-center flex-column"},y=d(()=>Object(c["h"])("h5",{class:"text-primary en-font"},"目前還沒有商品！快去選購吧",-1)),k=d(()=>Object(c["h"])("button",{class:"shop btn btn-primary py-2 px-5 text-white rounded-0"},"選擇商品",-1)),w={key:1,class:"col-xl-5 cart-list-menu bg-white offset-xl-1"},C={class:"px-1"},V=d(()=>Object(c["h"])("p",{class:"h5 en-font mt-5"},"購物清單",-1)),I=d(()=>Object(c["h"])("hr",null,null,-1)),$={class:"table align-middle px-4"},_=d(()=>Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th"),Object(c["h"])("th",{style:{width:"230px"}},"品名"),Object(c["h"])("th",{style:{width:"110px"}},"數量"),Object(c["h"])("th",{class:"text-end"},"單價")])],-1)),L=["disabled","onClick"],z=d(()=>Object(c["h"])("i",{class:"bi bi-x"},null,-1)),U=[z],q={key:0,class:"text-success"},S={class:"input-group input-group-sm"},E=["onUpdate:modelValue","onChange","disabled"],M={class:"input-group-text"},P={class:"text-end"},A={key:0,class:"text-success"},F=d(()=>Object(c["h"])("td",{colspan:"3",class:"text-end"},"總計",-1)),J={class:"text-end"},G={key:0},R=d(()=>Object(c["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),T={class:"text-end text-success"},B={class:"row w-100 m-0 coupon-code"},D={class:"col-12 d-flex justify-content-end"},H={key:2,class:"form-table-info col-xl-5 px-0"},K={class:"bg-white"},N={class:"row"},Q=d(()=>Object(c["h"])("p",{class:"h5 en-font mt-5"},"訂購人資料",-1)),W=d(()=>Object(c["h"])("hr",null,null,-1)),X={class:"mb-3 mt-3"},Y=d(()=>Object(c["h"])("label",{for:"email",class:"form-label"},"Email",-1)),Z={class:"mb-3"},tt=d(()=>Object(c["h"])("label",{for:"name",class:"form-label"},"姓名",-1)),et={class:"mb-3"},at=d(()=>Object(c["h"])("label",{for:"tel",class:"form-label"},"電話",-1)),ct={class:"mb-3"},st=d(()=>Object(c["h"])("label",{for:"address",class:"form-label"},"地址",-1)),lt={class:"mb-3"},ot=d(()=>Object(c["h"])("label",{for:"message",class:"form-label"},"留言",-1)),nt=d(()=>Object(c["h"])("div",{class:"text-end"},[Object(c["h"])("button",{class:"btn btn-primary w-100 mb-5 py-2 text-white rounded-0"},"送出訂單")],-1));function it(t,e,a,s,l,o){const n=Object(c["I"])("CustomLoading"),i=Object(c["I"])("router-link"),r=Object(c["I"])("Field"),d=Object(c["I"])("ErrorMessage"),z=Object(c["I"])("Form");return Object(c["z"])(),Object(c["g"])(c["a"],null,[Object(c["k"])(n,{active:l.isLoading},null,8,["active"]),b,Object(c["h"])("div",u,[Object(c["h"])("div",h,[Object(c["h"])("div",m,[Object(c["h"])("ul",p,[Object(c["h"])("li",j,[Object(c["h"])("p",{class:Object(c["s"])(["num d-block mx-auto",{primary:!0}])},"1"),O]),f])]),l.cart.carts?(Object(c["z"])(),Object(c["g"])("div",g,[0===l.cart.carts.length?(Object(c["z"])(),Object(c["g"])("div",v,[Object(c["h"])("div",x,[y,Object(c["k"])(i,{to:"../user/products"},{default:Object(c["U"])(()=>[k]),_:1})])])):Object(c["f"])("",!0),l.cart.carts.length>=1?(Object(c["z"])(),Object(c["g"])("div",w,[Object(c["h"])("div",C,[V,I,Object(c["h"])("table",$,[_,Object(c["h"])("tbody",null,[l.cart.carts?(Object(c["z"])(!0),Object(c["g"])(c["a"],{key:0},Object(c["G"])(l.cart.carts,e=>(Object(c["z"])(),Object(c["g"])("tr",{key:e.id},[Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm btn-cancel",disabled:l.status.loadingItem===e.id,onClick:t=>o.removeCartItem(e.id)},U,8,L)]),Object(c["h"])("td",null,[Object(c["j"])(Object(c["L"])(e.product.title)+" ",1),e.coupon?(Object(c["z"])(),Object(c["g"])("div",q," 已套用優惠券 ")):Object(c["f"])("",!0)]),Object(c["h"])("td",null,[Object(c["h"])("div",S,[Object(c["V"])(Object(c["h"])("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":t=>e.qty=t,onChange:t=>o.updateCart(e),disabled:e.id===l.status.loadingItem,style:{width:"30px"}},null,40,E),[[c["P"],e.qty,void 0,{number:!0}]]),Object(c["h"])("span",M,"/"+Object(c["L"])(e.product.unit),1)])]),Object(c["h"])("td",P,[l.cart.final_total!==l.cart.total?(Object(c["z"])(),Object(c["g"])("small",A,"折扣價：")):Object(c["f"])("",!0),Object(c["j"])(" "+Object(c["L"])(t.$filters.currency(e.final_total)),1)])]))),128)):Object(c["f"])("",!0)]),Object(c["h"])("tfoot",null,[Object(c["h"])("tr",null,[F,Object(c["h"])("td",J,Object(c["L"])(t.$filters.currency(l.cart.total)),1)]),l.cart.final_total!==l.cart.total?(Object(c["z"])(),Object(c["g"])("tr",G,[R,Object(c["h"])("td",T,Object(c["L"])(t.$filters.currency(l.cart.final_total)),1)])):Object(c["f"])("",!0)])]),Object(c["h"])("div",B,[Object(c["h"])("div",D,[Object(c["V"])(Object(c["h"])("input",{type:"text",class:"form-control d-inline-block","onUpdate:modelValue":e[0]||(e[0]=t=>l.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[c["P"],l.coupon_code]]),Object(c["h"])("button",{class:"btn btn-outline-secondary coupon d-inline-block ms-2 col-4",type:"button",onClick:e[1]||(e[1]=(...t)=>o.addCouponCode&&o.addCouponCode(...t))}," 套用優惠碼 ")])])])])):Object(c["f"])("",!0),l.cart.carts.length>=1?(Object(c["z"])(),Object(c["g"])("div",H,[Object(c["h"])("div",K,[Object(c["h"])("div",N,[Object(c["k"])(z,{class:"col-md-12 d-flex justify-content-center flex-column form-order",onSubmit:o.createOrder},{default:Object(c["U"])(({errors:t})=>[Q,W,Object(c["h"])("div",X,[Y,Object(c["k"])(r,{id:"email",name:"email",type:"email",class:Object(c["s"])(["form-control",{"is-invalid":t["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":e[2]||(e[2]=t=>l.form.user.email=t)},null,8,["class","modelValue"]),Object(c["k"])(d,{name:"email",class:"invalid-feedback"})]),Object(c["h"])("div",Z,[tt,Object(c["k"])(r,{id:"name",name:"姓名",type:"text",class:Object(c["s"])(["form-control",{"is-invalid":t["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":e[3]||(e[3]=t=>l.form.user.name=t)},null,8,["class","modelValue"]),Object(c["k"])(d,{name:"姓名",class:"invalid-feedback"})]),Object(c["h"])("div",et,[at,Object(c["k"])(r,{id:"tel",name:"電話",type:"tel",class:Object(c["s"])(["form-control",{"is-invalid":t["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:l.form.user.tel,"onUpdate:modelValue":e[4]||(e[4]=t=>l.form.user.tel=t)},null,8,["class","modelValue"]),Object(c["k"])(d,{name:"電話",class:"invalid-feedback"})]),Object(c["h"])("div",ct,[st,Object(c["k"])(r,{id:"address",name:"地址",type:"text",class:Object(c["s"])(["form-control",{"is-invalid":t["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":e[5]||(e[5]=t=>l.form.user.address=t)},null,8,["class","modelValue"]),Object(c["k"])(d,{name:"地址",class:"invalid-feedback"})]),Object(c["h"])("div",lt,[ot,Object(c["V"])(Object(c["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"2","onUpdate:modelValue":e[6]||(e[6]=t=>l.form.message=t)},null,512),[[c["P"],l.form.message]])]),nt]),_:1},8,["onSubmit"])])])])):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])])],64)}var rt={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},status:{loadingItem:""},isLoading:!1,cart:{},coupon_code:""}},inject:["emitter"],methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart";this.isLoading=!0,this.$http.get(t).then(t=>{this.cart=t.data.data,this.isLoading=!1})},updateCart(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart/"+t.id;this.isLoading=!0,this.status.loadingItem=t.id;const a={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:a}).then(t=>{this.getCart(),this.status.loadingItem=""}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/coupon",e={code:this.coupon_code};this.$http.post(t,{data:e}).then(t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart()}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},removeCartItem(t){const e="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/cart/"+t;this.isLoading=!0,this.status.loadingItem=t,this.$http.delete(e).then(t=>{this.status.loadingItem="",this.emitter.emit("update-qty"),this.$httpMessageState(t,"刪除購物車品項"),this.getCart(),this.isLoading=!1}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})},createOrder(){const t="https://vue3-course-api.hexschool.io/api/tracytung-vue-api/order",e=this.form;this.$http.post(t,{data:e}).then(t=>{this.orderId=t.data.orderId,this.$router.push("/checkout/"+this.orderId)}).catch(t=>{this.$swal({icon:"error",title:""+t.data.message})})}},created(){this.getCart()}},dt=(a("759b"),a("6b0d")),bt=a.n(dt);const ut=bt()(rt,[["render",it],["__scopeId","data-v-bba6a390"]]);e["default"]=ut},"71fd":function(t,e,a){},"759b":function(t,e,a){"use strict";a("71fd")},c215:function(t,e,a){t.exports=a.p+"img/banner-cart.3775134b.png"},da2c:function(t,e,a){t.exports=a.p+"img/cart-pd.3635a89c.png"}}]);
//# sourceMappingURL=chunk-7a49f8d4.d7dac068.js.map